@{
    ViewData["Title"] = "City Films";
}

<keep-alive>
    <component v-bind:is="page.currentComponent"> <slot></slot></component>
</keep-alive>
@section Scripts {
    <script>
        $(document).ready(function () {
            vApp = new Vue({
                el: '#app',
                data: {
                    page: new pageModel()
                },
            })
            window.onhashchange = function () {
                pageLoad();
            };
            pageLoad();
        });

        function pageLoad() {
            var aurl = window.location.hash;

            if (aurl === '' || aurl === hashValue.home) {
                vApp.page.currentComponent = 'home-component'; document.title = "Home";
            }
            else if (aurl === hashValue.adminDashboard) {
                var actionRequest = getRequest(apiAuthUrl.checkAuth);
                actionRequest.done(function (response) {
                    if (!response.data) {
                        window.location = "/home/login";
                        vApp.$toast.error("Access Denied!! Please login first!");
                        return;
                    }
                })
                vApp.page.currentComponent = 'admin-dashboard-component'; document.title = "Admin";
            }
            else if (aurl === hashValue.partners) {
                vApp.page.currentComponent = 'partners-component'; document.title = "Our Partners";
            }
            else if (aurl === hashValue.about) {
                vApp.page.currentComponent = 'about-component'; document.title = "About Us";
            }
            else if (aurl === hashValue.service) {
                vApp.page.currentComponent = 'service-component'; document.title = "Our Services";
            }
            else if (aurl === hashValue.contact) {
                vApp.page.currentComponent = 'contact-component'; document.title = "Contact Us";
            }
            else if (aurl === hashValue.booking) {
                vApp.page.currentComponent = 'booking-component'; document.title = "Book Now";
            }
        }

    </script>
}
